<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë‚˜ì´ ê³„ì‚°ê¸°</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 10px;
      margin: 0;
      background: #f7f7f7;
    }

    .container {
      max-width: 400px;
      margin: 0 auto;
      background: #fff;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    h2 {
      font-size: 20px;
      text-align: center;
      margin-bottom: 15px;
    }

    label {
      font-size: 14px;
      display: block;
      margin-top: 10px;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    button {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      margin-top: 15px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    button:hover {
      background-color: #0056b3;
    }

    #result {
      margin-top: 20px;
      font-size: 16px;
      font-weight: bold;
      white-space: pre-line;
      word-break: break-word;
    }

    a {
      color: #1e90ff;
      text-decoration: underline;
    }
  </style>
</head>
<body>

<div class="container">
  <h2>ì—°ë‚˜ì´ / ë§Œë‚˜ì´ ê³„ì‚°ê¸°</h2>

  <label>ìƒë…„ì›”ì¼:</label>
  <input type="text" id="birthDate" placeholder="ì˜ˆ: 2008-10-17">

  <label>ìš©ì–´ ì„ íƒ:</label>
  <select id="termSelect">
    <option value="">-- ìš©ì–´ ì„ íƒ --</option>
    <option value="ì†Œë…„">ì†Œë…„</option>
    <option value="ì•„ë™">ì•„ë™</option>
    <option value="ì•„ë™ë“±">ì•„ë™ë“±</option>
    <option value="ì•„ë™ã†ì²­ì†Œë…„">ì•„ë™ã†ì²­ì†Œë…„</option>
    <option value="ì–´ë¦°ì´">ì–´ë¦°ì´</option>
    <option value="ì—°ì†Œì">ì—°ì†Œì</option>
    <option value="ì²­ì†Œë…„">ì²­ì†Œë…„</option>
    <option value="ì´‰ë²•ì†Œë…„">ì´‰ë²•ì†Œë…„</option>
    <option value="ë²”ì£„ì†Œë…„">ë²”ì£„ì†Œë…„</option>
    <option value="ìš°ë²”ì†Œë…„">ìš°ë²”ì†Œë…„</option>
    <option value="í˜•ì‚¬ë¯¸ì„±ë…„ì">í˜•ì‚¬ë¯¸ì„±ë…„ì</option>
  </select>

  <button onclick="calculateAges()">ë‚˜ì´ ê³„ì‚°</button>

  <div id="result"></div>
</div>

<script>
/* ===== ë²•ë¥  ê·œì • ===== */
const ê·œì • = {

  "ì²­ì†Œë…„ë³´í˜¸ë²•": {
    terms: {
      "ì²­ì†Œë…„": {
        ê¸°ì¤€: "ì—°ë‚˜ì´",
        ìµœëŒ€: 19,
        refs: [
          "ì²­ì†Œë…„ë³´í˜¸ë²• ì œ2ì¡° ì œ1í˜¸"
        ]
      }
    }
  },

  "ì‹í’ˆìœ„ìƒë²•": {
    terms: {
      "ì²­ì†Œë…„": {
        ê¸°ì¤€: "ì—°ë‚˜ì´",
        ìµœëŒ€: 19,
        refs: [
          "ì‹í’ˆìœ„ìƒë²• ì œ44ì¡° ì œ2í•­"
        ]
      }
    }
  }

};

/* ===== ë‚˜ì´ ê³„ì‚° ===== */
function calculateAges() {
  const birthDateStr = document.getElementById("birthDate").value.trim();
  const term = document.getElementById("termSelect").value;
  const resultDiv = document.getElementById("result");

  const datePattern = /^\d{4}-\d{2}-\d{2}$/;
  if (!datePattern.test(birthDateStr)) {
    resultDiv.innerText = "ìƒë…„ì›”ì¼ì„ YYYY-MM-DD í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.";
    return;
  }

  const birthDate = new Date(birthDateStr);
  const currentDate = new Date();

  if (isNaN(birthDate.getTime())) {
    resultDiv.innerText = "ì˜¬ë°”ë¥¸ ìƒë…„ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.";
    return;
  }

  const yearAge = currentDate.getFullYear() - birthDate.getFullYear();
  let manAge = yearAge;

  const monthDiff = currentDate.getMonth() - birthDate.getMonth();
  const dayDiff = currentDate.getDate() - birthDate.getDate();
  if (monthDiff < 0 || (monthDiff === 0 && dayDiff < 0)) {
    manAge--;
  }

  let lawResults = "";

  if (term) {
    for (const law in ê·œì •) {
      if (ê·œì •[law].terms && ê·œì •[law].terms[term]) {
        const ê¸°ì¤€ì •ë³´ = ê·œì •[law].terms[term];
        const ê¸°ì¤€ = ê¸°ì¤€ì •ë³´.ê¸°ì¤€;
        let í•´ë‹¹ = false;

        if (ê¸°ì¤€ === "ì—°ë‚˜ì´") {
          í•´ë‹¹ = yearAge < ê¸°ì¤€ì •ë³´.ìµœëŒ€;
        } else if (ê¸°ì¤€ === "ë§Œë‚˜ì´") {
          í•´ë‹¹ = manAge < ê¸°ì¤€ì •ë³´.ìµœëŒ€;
        } else if (ê¸°ì¤€ === "ë§Œë‚˜ì´ë²”ìœ„") {
          í•´ë‹¹ = manAge >= ê¸°ì¤€ì •ë³´.ìµœì†Œ && manAge <= ê¸°ì¤€ì •ë³´.ìµœëŒ€;
        }

        lawResults += `${law} ${term}: ${í•´ë‹¹ ? "í•´ë‹¹ë¨ âœ…" : "í•´ë‹¹ ì•ˆ ë¨ âŒ"}\n`;

        if (í•´ë‹¹ && ê¸°ì¤€ì •ë³´.refs) {
          ê¸°ì¤€ì •ë³´.refs.forEach(ref => {
            const url = `https://www.law.go.kr/lsSc.do?query=${encodeURIComponent(ref)}`;
            lawResults += `ğŸ”— ${ref}\n`;
          });
        }

        lawResults += "\n";
      }
    }

    if (!lawResults) {
      lawResults = "ì„ íƒí•œ ìš©ì–´ì— í•´ë‹¹í•˜ëŠ” ë²•ë¥  ê¸°ì¤€ì´ ì—†ìŠµë‹ˆë‹¤.";
    }
  } else {
    lawResults = "ìš©ì–´ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.";
  }

  const todayStr = currentDate.toISOString().split("T")[0];

  resultDiv.innerText =
    `ì˜¤ëŠ˜ ë‚ ì§œ: ${todayStr}\n` +
    `ì—°ë‚˜ì´: ${yearAge} / ë§Œë‚˜ì´: ${manAge}\n\n` +
    lawResults;
}
</script>

<div style="text-align:center;">
  <div style="display:inline-block;">
    <button
      style="padding:12px 20px; font-size:16px; background:#007bff; color:white; border:none; border-radius:6px; cursor:pointer;"
      onclick="window.open('https://tally.so/r/VLj2Ng', '_blank');"
    >
      ì˜ê²¬ ì œì¶œ
    </button>
  </div>
</div>

</body>
</html>
